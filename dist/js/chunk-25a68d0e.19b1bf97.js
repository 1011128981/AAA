(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25a68d0e"],{"44f6":function(e,r,t){e.exports=t.p+"img/book.a54750d9.jpg"},"76ad":function(e,r,t){"use strict";var o=t("814e"),a=t.n(o);a.a},"7d6c":function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("div",[o("el-breadcrumb",{staticClass:"breadcrumb-row",attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),o("el-breadcrumb-item",[e._v("借阅管理")]),o("el-breadcrumb-item",[e._v("图书借阅添加")])],1),o("el-card",[o("el-tabs",{attrs:{type:"border-card"}},[o("el-tab-pane",[o("span",{attrs:{slot:"label"},slot:"label"},[o("i",{staticClass:"el-icon-date"}),e._v(" 添加借阅 ")]),o("el-row",[o("el-col",{attrs:{span:15}},[o("el-form",{ref:"bookAddFrom",staticClass:"bookAddFrom",attrs:{"label-width":"100px",model:e.formBook}},[o("el-form-item",{attrs:{label:"图书ID"}},[o("el-input",{on:{change:e.idChangeEvent},model:{value:e.formBook.book_id,callback:function(r){e.$set(e.formBook,"book_id",r)},expression:"formBook.book_id"}})],1),o("el-form-item",{attrs:{label:"图书名称"}},[o("el-input",{on:{change:e.bookNameChangeEvent},model:{value:e.formBook.book_name,callback:function(r){e.$set(e.formBook,"book_name",r)},expression:"formBook.book_name"}})],1),o("el-form-item",{attrs:{label:"图书作者"}},[o("el-input",{attrs:{disabled:""},model:{value:e.formBook.author,callback:function(r){e.$set(e.formBook,"author",r)},expression:"formBook.author"}})],1),o("el-form-item",{attrs:{label:"图书出版社"}},[o("el-input",{attrs:{disabled:""},model:{value:e.formBook.press,callback:function(r){e.$set(e.formBook,"press",r)},expression:"formBook.press"}})],1),o("el-form-item",{attrs:{label:"借阅者ID"}},[o("el-input",{attrs:{disabled:""},model:{value:e.formBook.user_id,callback:function(r){e.$set(e.formBook,"user_id",r)},expression:"formBook.user_id"}})],1),o("el-form-item",{attrs:{label:"借阅人"}},[o("el-input",{on:{change:e.userChangeEvent},model:{value:e.formBook.user_name,callback:function(r){e.$set(e.formBook,"user_name",r)},expression:"formBook.user_name"}})],1),o("el-form-item",{attrs:{label:"借阅册数"}},[o("el-input",{attrs:{value:"1",type:"Number",disabled:""}})],1),o("el-form-item",{attrs:{label:"借阅时间"}},[o("el-input",{attrs:{type:"text","suffix-icon":"el-icon-date",value:new Date+"",disabled:""}})],1)],1),o("el-button",{attrs:{type:"primary"},on:{click:e.addBorrowClick}},[e._v("进行借阅")]),o("el-button",{attrs:{type:"info"},on:{click:e.resetClick}},[e._v("重置")])],1),o("el-col",{attrs:{span:9}},[o("img",{attrs:{src:t("44f6"),alt:""}})])],1)],1),o("el-tab-pane",{attrs:{label:"添加还书"}},[o("el-form",{attrs:{inline:!0,model:e.addreturnFrom}},[o("el-form-item",{attrs:{label:"借阅人"}},[o("el-input",{attrs:{placeholder:"借阅人姓名"},on:{change:e.addreturnnameChangeEvent},model:{value:e.addreturnFrom.username,callback:function(r){e.$set(e.addreturnFrom,"username",r)},expression:"addreturnFrom.username"}})],1),o("el-form-item",{attrs:{label:"借阅图书"}},[o("el-select",{attrs:{placeholder:"借阅图书列表"},model:{value:e.addreturnFrom.book_id,callback:function(r){e.$set(e.addreturnFrom,"book_id",r)},expression:"addreturnFrom.book_id"}},e._l(e.selectList,(function(e,r){return o("el-option",{key:r,attrs:{label:e.name,value:e.book_id}})})),1)],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.submitClick}},[e._v("还书")])],1)],1)],1),o("el-tab-pane",{attrs:{label:"添加权限",disabled:""}})],1)],1)],1)},a=[],n=(t("b0c0"),t("96cf"),t("1da1")),s=t("8daa"),u={data:function(){return{formBook:{book_id:"",book_name:"",author:"",press:"",user_id:"",user_name:""},addreturnFrom:{username:"",book_id:"",user_id:""},selectList:[]}},methods:{resetClick:function(){this.$refs.bookAddFrom.resetFields()},idChangeEvent:function(e){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["i"])({id:e});case 2:if(o=t.sent,200==o.code){t.next=7;break}return r.formBook={},r.$message.error("该图书不存在，请重新输入正确的图书ID！"),t.abrupt("return");case 7:r.formBook.book_name=o.data[0].name,r.formBook.author=o.data[0].author,r.formBook.press=o.data[0].press;case 10:case"end":return t.stop()}}),t)})))()},bookNameChangeEvent:function(e){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["g"])({bookname:e});case 2:if(o=t.sent,200==o.code){t.next=10;break}return r.formBook.user_id="",r.formBook.user_name="",r.formBook.author="",r.formBook.press="",r.$message.error("该图书不存在，请重新输入正确的图书名称！"),t.abrupt("return");case 10:r.formBook.book_id=o.data.result[0].id,r.formBook.book_name=o.data.result[0].name,r.formBook.author=o.data.result[0].author,r.formBook.press=o.data.result[0].press;case 14:case"end":return t.stop()}}),t)})))()},userChangeEvent:function(e){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["l"])({name:e});case 2:if(o=t.sent,200==o.code){t.next=8;break}return r.formBook.user_id="",r.formBook.user_name="",r.$message.error("该用户不存在，请重新输入正确的用户姓名！"),t.abrupt("return");case 8:r.formBook.user_id=o.data.id;case 9:case"end":return t.stop()}}),t)})))()},addreturnnameChangeEvent:function(e){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["l"])({name:e});case 2:if(o=t.sent,200==o.code){t.next=7;break}return r.selectList=[],r.$message.error("该用户不存在，请重新输入正确的用户姓名！"),t.abrupt("return");case 7:return t.next=9,Object(s["k"])({user_id:o.data.id});case 9:if(a=t.sent,r.addreturnFrom.user_id=o.data.id,200==a.code){t.next=15;break}return r.selectList=[],r.$message.error("该用户不存在未还的书！"),t.abrupt("return");case 15:r.selectList=a.data;case 16:case"end":return t.stop()}}),t)})))()},submitClick:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(s["b"])({user_id:e.addreturnFrom.user_id,book_id:e.addreturnFrom.book_id});case 2:if(t=r.sent,200==t.code){r.next=5;break}return r.abrupt("return",e.$message.error("还书失败"));case 5:e.$message.success("还书成功"),e.addreturnFrom={};case 7:case"end":return r.stop()}}),r)})))()},addBorrowClick:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.formBook.book_id&&e.formBook.user_id){r.next=2;break}return r.abrupt("return",e.$message.error("请输入有效的借阅信息"));case 2:return r.next=4,Object(s["c"])({book_id:e.formBook.book_id,user_id:e.formBook.user_id});case 4:if(t=r.sent,200==t.code){r.next=7;break}return r.abrupt("return",e.$message.error("借阅失败"));case 7:e.$message.success("借阅成功"),e.$refs.bookAddFrom.resetFields();case 9:case"end":return r.stop()}}),r)})))()}}},i=u,c=(t("76ad"),t("2877")),l=Object(c["a"])(i,o,a,!1,null,"2d796b0d",null);r["default"]=l.exports},"814e":function(e,r,t){},b0c0:function(e,r,t){var o=t("83ab"),a=t("9bf2").f,n=Function.prototype,s=n.toString,u=/^\s*function ([^ (]*)/,i="name";o&&!(i in n)&&a(n,i,{configurable:!0,get:function(){try{return s.call(this).match(u)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-25a68d0e.19b1bf97.js.map